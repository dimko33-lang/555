  <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>СТО: крест с тонкой x′</title>
<style>
  body { margin:0; background:#111; overflow:hidden; touch-action: none; }
  canvas { display:block; }
</style>
<body>
<canvas id="c"></canvas>
<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let angle = 0; // угол вращения крестика
let dragging = false;
let lastX = 0;

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

const numLines = 7;   
const spacing = 60;    // 1 световая секунда = 60 пикселей
const vertLineLength = 1000; // длина вертикальных линий и крестика

// drag
canvas.addEventListener("pointerdown", e => {
  dragging = true;
  lastX = e.clientX;
});
canvas.addEventListener("pointermove", e => {
  if(dragging){
    const dx = e.clientX - lastX;
    angle -= dx * 0.01; // реверс вращения
    lastX = e.clientX;
  }
});
canvas.addEventListener("pointerup", e => dragging = false);
canvas.addEventListener("pointerleave", e => dragging = false);

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const cx = canvas.width / 2;
  const cy = canvas.height / 2;

  const cosA = Math.cos(angle);
  const sinA = Math.sin(angle);

  // --- горизонтальная ось ---
  ctx.strokeStyle = "#888"; // серая
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, cy);
  ctx.lineTo(canvas.width, cy);
  ctx.stroke();

  // крест ct′ + x′ (в центре)
  const ctX0 = cx - sinA*vertLineLength/2;
  const ctY0 = cy - cosA*vertLineLength/2;
  const ctX1 = cx + sinA*vertLineLength/2;
  const ctY1 = cy + cosA*vertLineLength/2;

  const xX0 = cx - cosA*vertLineLength/2;
  const xY0 = cy + sinA*vertLineLength/2;
  const xX1 = cx + cosA*vertLineLength/2;
  const xY1 = cy - sinA*vertLineLength/2;

  // ct′
  ctx.strokeStyle = "#0ff";
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(ctX0, ctY0);
  ctx.lineTo(ctX1, ctY1);
  ctx.stroke();

  // x′ (супер тонкая)
  ctx.strokeStyle = "#fa0";
  ctx.lineWidth = 1; /* ЕЩЁ ТОНЬШЕ: было 1.5 */
  ctx.beginPath();
  ctx.moveTo(xX0, xY0);
  ctx.lineTo(xX1, xY1);
  ctx.stroke();

  // вертикальные линии, подвешенные к x′
  ctx.strokeStyle = "#880";
  ctx.lineWidth = 1;
  for(let i=-Math.floor(numLines/2); i<=Math.floor(numLines/2); i++){
    const t = i / Math.floor(numLines/2); 
    const px = xX0 + (xX1 - xX0)*(0.5 + t/2); 
    const py = xY0 + (xY1 - xY0)*(0.5 + t/2);
    
    // Рисуем вертикальную линию
    ctx.beginPath();
    ctx.moveTo(px, py - vertLineLength/2);
    ctx.lineTo(px, py + vertLineLength/2);
    ctx.stroke();
    
    // ОТМЕТКИ НА ВЕРТИКАЛЬНЫХ ЛИНИЯХ (каждые 1 световая секунда)
    ctx.strokeStyle = "#aa0"; // жёлто-оранжевый для отметок
    ctx.lineWidth = 0.8;
    
    // Рассчитываем шаг отметок (равный spacing = 60px)
    const markLength = 10; // длина черточки
    const marksPerSide = Math.floor(vertLineLength / 2 / spacing);
    
    // Отмечаем вверх от центра
    for(let j = 1; j <= marksPerSide; j++) {
      const markY = py - j * spacing; // 1 световая секунда вверх
      ctx.beginPath();
      ctx.moveTo(px - markLength/2, markY);
      ctx.lineTo(px + markLength/2, markY);
      ctx.stroke();
    }
    
    // Отмечаем вниз от центра
    for(let j = 1; j <= marksPerSide; j++) {
      const markY = py + j * spacing; // 1 световая секунда вниз
      ctx.beginPath();
      ctx.moveTo(px - markLength/2, markY);
      ctx.lineTo(px + markLength/2, markY);
      ctx.stroke();
    }
    
    // Возвращаем цвет для линий
    ctx.strokeStyle = "#880";
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
